services:
  goose-impostor:
    build: ..
    container_name: goose-impostor-sandbox
    image: smart-home-goose:latest
    platform: linux/arm64
    # HÃ¤lt den Container offen, damit du dich jederzeit verbinden kannst
    stdin_open: true
    tty: true
    volumes:
      # Dein Code vom Mac
      - ../:/home/devuser/smart-home:Z
      # Deine Goose-Config vom Mac
      - ${HOME}/.config/goose:/home/devuser/.config/goose:Z
    working_dir: /home/devuser/smart-home
    # Verhindert Root-Rechte Probleme auf dem Mac
    user: "devuser"
    environment:
      GOOGLE_API_KEY: ${GOOGLE_API_KEY}
      # Git Konfiguration - jetzt getrennt steuerbar
      GIT_AUTHOR_NAME: ${GIT_AUTHOR_NAME}
      GIT_AUTHOR_EMAIL: ${GIT_AUTHOR_EMAIL}
      GIT_COMMITTER_NAME: ${GIT_COMMITTER_NAME}
      GIT_COMMITTER_EMAIL: ${GIT_COMMITTER_EMAIL}
      OPENAI_HOST: ${OPENAI_HOST}
      OPENAI_API_KEY: ${OPENAI_API_KEY}
    extra_hosts:
      - "host.docker.internal:host-gateway"